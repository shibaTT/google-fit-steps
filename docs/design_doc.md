# Google Fit 歩数取得アプリ 設計書

## ドキュメント更新履歴

| バージョン |   更新日   | 更新者 | 変更内容                                    |
| :--------: | :--------: | :----: | :------------------------------------------ |
|    0.1     | 2025-06-24 |  初版  | ドキュメント作成                            |
|    0.2     | 2025-06-24 |  追記  | UI フレームワーク・デプロイ先・画面構成更新 |
|    0.3     | 2025-06-24 |  最新  | 固定アカウント・合算・認証デバッグ等反映    |

---

## 1. アプリケーション概要

Google Fit の REST API を利用し、過去 1 週間分の歩数データを取得・グラフ・合算・一覧表示する Web アプリケーション。

## 2. 要件定義

### 2.1 機能要件

-   Google Fit REST API から歩数データを取得する
-   過去 1 週間分の歩数を日別で表示
-   歩数グラフ（Chart.js）
-   1〜7 日分（今日除く）の歩数合算値をテーブル一覧で表示
-   日別歩数のテーブル一覧
-   固定アカウントの歩数のみ常時表示（認証スキップ・リフレッシュトークン自動更新）
-   Google Fit 認証用デバッグページ（`/auth-debug`）

### 2.2 非機能要件

-   Next.js フレームワークを利用
-   レスポンシブデザイン
-   セキュリティ（Google 認証・API キー管理等）
-   デプロイ先は GitHub Pages

## 3. 技術選定

| 項目           | 候補・推奨技術        | 備考                     |
| :------------- | :-------------------- | :----------------------- |
| フロントエンド | Next.js               | App Router 利用          |
| UI             | Tailwind CSS, daisyUI | TailwindCSS ラッパー利用 |
| 認証           | Google OAuth 2.0      | Google Fit API 用        |
| チャート       | Chart.js              | 歩数の可視化             |
| デプロイ       | GitHub Pages          |                          |

## 4. 画面設計

-   1 画面のみ（固定アカウントの歩数グラフ・合算・一覧）
-   `/auth-debug`で認証・トークン取得デバッグ

## 5. API 設計

-   Google Fit REST API: [公式ドキュメント](https://developers.google.com/fit/rest)
-   必要なスコープ: `https://www.googleapis.com/auth/fitness.activity.read`
-   `/api/auth/google-token-exchange`（認可コード → トークン変換）

## 6. 今後の検討事項

-   テスト・CI/CD
-   アクセシビリティ強化
-   不要 API・認証処理・UI の整理
